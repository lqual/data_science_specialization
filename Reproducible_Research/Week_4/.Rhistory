?download.file
url <- "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2"
download.file(url, "stormData.csv.bz2")
library(data.table)
data <- fread("stormData.csv.bz2")
install.packages("R.utils")
library(R.utils)
data <- fread("stormData.csv.bz2")
head(data)
summary(data$MAG)
str(data$MAG)
summary(data$PROPDMGEXP)
str(data$PROPDMGEXP)
table(data$PROPDMGEXP)
table(data$CROPDMGEXP)
summary(data$PROPDMG)
summary(data$CROPDMG)
summary(data$EVTYPE)
unique(data$EVTYPE)
data2 <- data %>% select(BGN_DATE, EVTYPE, FATALITIES, INJURIES, PROPDMG, PROPDMGEXP, CROPDMG, CROPDMGEXP)
library(dplyr)
data2 <- data %>% select(BGN_DATE, EVTYPE, FATALITIES, INJURIES, PROPDMG, PROPDMGEXP, CROPDMG, CROPDMGEXP)
head(data2)
test <- data2$BGN_DATE
data2$BGN_DATE <- as.Date(data2$BGN_DATE)
library(lubridate)
test <- mdy(data2$BGN_DATE)
test <- mdy_hms(data2$BGN_DATE)
head(test)
test2 <- ymd(test)
head(test2)
data2$BGN_DATE <- ymd(mdy_hms(data2$BGN_DATE))
head(data2$BGN_DATE)
head(data2)
class(data2$EVTYPE)
table(data2$EVTYPE)
data3 <- data2 %<% filter(grepl("^SUMMARY", EVTYPE))
data3 <- data2 %>% filter(grepl("^SUMMARY", EVTYPE))
head(data3)
data3
data3 <- data2 %>% filter(grepl("^SUM", EVTYPE))
data3 <- data2 %>% filter(grepl("^[Ss][Uu][Mm]", EVTYPE))
data3
data3 <- data2 %>% filter(!grepl("^[Ss][Uu][Mm]", EVTYPE))
data4 <- data2 %>% filter(grepl("^[Ss][Uu][Mm]", EVTYPE))
data2 <- data2 %>% filter(!grepl("^[Ss][Uu][Mm]", EVTYPE))
table(data2$EVTYPE)
setwd("~/R Directory/Reproducible_Research/Week_4/reproducible_research_project4")
data2 <- data2 %>% mutate(people_harmed = FATALITIES + INJURIES)
head(data2)
data2[15:30, ]
data3 <- data2 %>% mutate(property = ifelse(PROPDMGEXP == [Hh], PROPDMG * 100, 0))
data3 <- data2 %>% mutate(property = ifelse(PROPDMGEXP == H|h, PROPDMG * 100, 0))
table(data2$PROPDMGEXP)
class(data2$PROPDMGEXP)
data3 <- data2 %>% mutate(property = ifelse(PROPDMGEXP == "H"|"h", PROPDMG * 100, 0))
data3 <- data2 %>% mutate(property = ifelse(PROPDMGEXP == "H", PROPDMG * 100, 0))
head(data3)
data3 <- data2 %>% mutate(property = ifelse(PROPDMGEXP == "K", PROPDMG * 1000, 0))
head(data3)
data3 <- data2 %>% mutate(PROPDMGEXP = ifelse(PROPDMGEXP == "h", "H", ifelse(PROPDMGEXP == "k", "K", ifelse(PROPDMGEXP == "m", "M", PROPDMGEXP == "b", "B", PROPDMGEXP))))
data3 <- data2 %>% mutate(PROPDMGEXP = ifelse(PROPDMGEXP == "h", "H", ifelse(PROPDMGEXP == "k", "K", ifelse(PROPDMGEXP == "m", "M", ifelse(PROPDMGEXP == "b", "B", PROPDMGEXP)))))
table(data3)
table(data3$PROPDMGEXP)
data3 <- data3 %>% mutate(property =
ifelse(PROPDMGEXP == "H", PROPDMG * 100,
ifelse(PROPDMGEXP == "K", PROPDMG * 1000,
ifelse(PROPDMGEXP == "M", PROPDMG * 1000000,
ifelse(PROPDMGEXP == "B", PROPDMG * 1000000000,
ifelse(PROPDMGEXP == "0", PROPDMG * 10,
ifelse(PROPDMGEXP == "1", PROPDMG * 10 + 1,
ifelse(PROPDMGEXP == "2", PROPDMG * 10 + 2,
ifelse(PROPDMGEXP == "3", PROPDMG * 10 + 3,
ifelse(PROPDMGEXP == "4", PROPDMG * 10 + 4,
ifelse(PROPDMGEXP == "5", PROPDMG * 10 + 5,
ifelse(PROPDMGEXP == "6", PROPDMG * 10 + 6,
ifelse(PROPDMGEXP == "7", PROPDMG * 10 + 7,
ifelse(PROPDMGEXP == "8", PROPDMG * 10 + 8,
ifelse(PROPDMGEXP == "9", PROPDMG * 10 + 9,
PROPDMG)))))))))))))))
head(data3)
data3[1000:1020, ]
table(data3$CROPDMGEXP)
data2 <- data2 %>% mutate(PROPDMGEXP =
ifelse(PROPDMGEXP == "h", "H",
ifelse(PROPDMGEXP == "k", "K",
ifelse(PROPDMGEXP == "m", "M",
ifelse(PROPDMGEXP == "b", "B", PROPDMGEXP)))))
data2 <- data2 %>% mutate(property =
ifelse(PROPDMGEXP == "H", PROPDMG * 100,
ifelse(PROPDMGEXP == "K", PROPDMG * 1000,
ifelse(PROPDMGEXP == "M", PROPDMG * 1000000,
ifelse(PROPDMGEXP == "B", PROPDMG * 1000000000,
ifelse(PROPDMGEXP == "0", PROPDMG * 10,
ifelse(PROPDMGEXP == "1", PROPDMG * 10 + 1,
ifelse(PROPDMGEXP == "2", PROPDMG * 10 + 2,
ifelse(PROPDMGEXP == "3", PROPDMG * 10 + 3,
ifelse(PROPDMGEXP == "4", PROPDMG * 10 + 4,
ifelse(PROPDMGEXP == "5", PROPDMG * 10 + 5,
ifelse(PROPDMGEXP == "6", PROPDMG * 10 + 6,
ifelse(PROPDMGEXP == "7", PROPDMG * 10 + 7,
ifelse(PROPDMGEXP == "8", PROPDMG * 10 + 8,
ifelse(PROPDMGEXP == "9", PROPDMG * 10 + 9,
PROPDMG)))))))))))))))
head(data2)
data2 <- data %>% select(BGN_DATE, EVTYPE, FATALITIES, INJURIES, PROPDMG,
PROPDMGEXP, CROPDMG, CROPDMGEXP)
data2$BGN_DATE <- ymd(mdy_hms(data2$BGN_DATE))
data2 <- data2 %>% filter(!grepl("^[Ss][Uu][Mm]", EVTYPE))
data2 <- data2 %>% mutate(people_harmed = FATALITIES + INJURIES)
data2 <- data2 %>% mutate(PROPDMGEXP =
ifelse(PROPDMGEXP == "h", "H",
ifelse(PROPDMGEXP == "k", "K",
ifelse(PROPDMGEXP == "m", "M",
ifelse(PROPDMGEXP == "b", "B", PROPDMGEXP)))))
data2 <- data2 %>% mutate(property =
ifelse(PROPDMGEXP == "H", PROPDMG * 100,
ifelse(PROPDMGEXP == "K", PROPDMG * 1000,
ifelse(PROPDMGEXP == "M", PROPDMG * 1000000,
ifelse(PROPDMGEXP == "B", PROPDMG * 1000000000,
ifelse(PROPDMGEXP == "0", PROPDMG * 10,
ifelse(PROPDMGEXP == "1", PROPDMG * 10 + 1,
ifelse(PROPDMGEXP == "2", PROPDMG * 10 + 2,
ifelse(PROPDMGEXP == "3", PROPDMG * 10 + 3,
ifelse(PROPDMGEXP == "4", PROPDMG * 10 + 4,
ifelse(PROPDMGEXP == "5", PROPDMG * 10 + 5,
ifelse(PROPDMGEXP == "6", PROPDMG * 10 + 6,
ifelse(PROPDMGEXP == "7", PROPDMG * 10 + 7,
ifelse(PROPDMGEXP == "8", PROPDMG * 10 + 8,
ifelse(PROPDMGEXP == "9", PROPDMG * 10 + 9,
PROPDMG)))))))))))))))
head(data2)
data2 <- data2 %>% mutate(CROPDMGEXP =
ifelse(CROPDMGEXP == "h", "H",
ifelse(CROPDMGEXP == "k", "K",
ifelse(CROPDMGEXP == "m", "M",
ifelse(CROPDMGEXP == "b", "B", CROPDMGEXP)))))
data2 <- data2 %>% mutate(crop =
ifelse(CROPDMGEXP == "H", CROPDMG * 100,
ifelse(CROPDMGEXP == "K", CROPDMG * 1000,
ifelse(CROPDMGEXP == "M", CROPDMG * 1000000,
ifelse(CROPDMGEXP == "B", CROPDMG * 1000000000,
ifelse(CROPDMGEXP == "0", CROPDMG * 10,
ifelse(CROPDMGEXP == "1", CROPDMG * 10 + 1,
ifelse(CROPDMGEXP == "2", CROPDMG * 10 + 2,
ifelse(CROPDMGEXP == "3", CROPDMG * 10 + 3,
ifelse(CROPDMGEXP == "4", CROPDMG * 10 + 4,
ifelse(CROPDMGEXP == "5", CROPDMG * 10 + 5,
ifelse(CROPDMGEXP == "6", CROPDMG * 10 + 6,
ifelse(CROPDMGEXP == "7", CROPDMG * 10 + 7,
ifelse(CROPDMGEXP == "8", CROPDMG * 10 + 8,
ifelse(CROPDMGEXP == "9", CROPDMG * 10 + 9,
CROPDMG)))))))))))))))
head(data2)
data2 <- data2 %>% mutate(damage = property + crop)
head(data2)
table(data2$damage)
data3 <- data2 %>% mutate(damage = property + crop) %>% filter(damage != 0)
table(data3$damage)
data2 <- data2 %>% mutate(damage = property + crop) %>% filter(damage != 0)
table(data2$EVTYPE)
